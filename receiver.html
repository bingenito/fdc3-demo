<html>
    <head>
        <style>
            body { background-color: #ffffff; }
        </style>
    </head>
    <body>
        <div id="statusText">Receiver</div>
    </body>

    <script>
        async function initFdc3() {
            // For simplicity, force channel to 'green' system channel by default.  Container
            // can provide facility to allow user to change this
            await fdc3.joinChannel('green');

            fdc3.addContextListener('fdc3.instrument', instrument => {
                alert(JSON.stringify(instrument));
            });

            document.getElementById('statusText').innerHTML += ' ready';
        }

        (async () => {
            if (window.fdc3) {
                await initFdc3();
            } else {
                window.addEventListener('fdc3Ready', async () => initFdc3());
            }
        })();
    </script>
</html>